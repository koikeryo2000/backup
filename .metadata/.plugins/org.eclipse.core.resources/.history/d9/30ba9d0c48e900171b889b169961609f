package com.internousdev.template.action;

import java.util.Map;

import org.apache.struts2.interceptor.SessionAware;

import com.internousdev.template.dao.BuyItemDAO;
import com.internousdev.template.dao.LoginDAO;
import com.internousdev.template.dto.BuyItemDTO;
import com.internousdev.template.dto.LoginDTO;
import com.opensymphony.xwork2.ActionSupport;
import com.sun.org.apache.bcel.internal.generic.RETURN;

public class LoginAction extends ActionSupport implements SessionAware{

private String loginUserId;

private String loginPassword;

private String result;

public Map<String, Object> session;

private LoginDAO loginDAO = new LoginDAO();

private LoginDTO loginDTO = new LoginDTO();

private BuyItemDAO buyIteamDAO = new BuyItemDAO();

public String execute(){

	result=ERROR;

	loginDTO = loginDAO.getLoginUserInfo(loginUserId, loginPassword);

	session.put("loginUser", loginDTO);

	if (((LoginDTO) session.get("loginUser")).getLoginFlg()) {
		result = SUCCESS;

		BuyItemDTO  buyItemDTO = buyIteamDAO.getBuyItemInfo();
		session.put("login_user_id", loginDTO.getLoginId());
		session.put("id", buyItemDTO.getId());
		session.put("buyItem_name",buyItemDTO.getItemName());
		session.put("buyItem_price", buyItemDTO.getItemPrice());
		return result;

	}

	return result;

}

public String getLoginUserId() {
	return loginUserId;
}

public void setLoginUserId(String loginUserId) {
	this.loginUserId = loginUserId;
}

public String getLoginPassword() {
	return loginPassword;
}

public void setLoginPassword(String loginPassword) {
	this.loginPassword = loginPassword;
}

public String getResult() {
	return result;
}

public void setResult(String result) {
	this.result = result;
}

public Map<String, Object> getSession() {
	return session;
}

public void setSession(Map<String, Object> session) {
	this.session = session;
}

public LoginDAO getLoginDAO() {
	return loginDAO;
}

public void setLoginDAO(LoginDAO loginDAO) {
	this.loginDAO = loginDAO;
}

public LoginDTO getLoginDTO() {
	return loginDTO;
}

public void setLoginDTO(LoginDTO loginDTO) {
	this.loginDTO = loginDTO;
}

public BuyItemDAO getBuyIteamDAO() {
	return buyIteamDAO;
}

public void setBuyIteamDAO(BuyItemDAO buyIteamDAO) {
	this.buyIteamDAO = buyIteamDAO;
}

	}

