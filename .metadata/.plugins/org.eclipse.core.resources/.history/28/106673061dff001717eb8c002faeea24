package dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import dto.UserInformationDTO;
import util.DBConnector;

public class ShowUserInformationDAO {
	private DBConnector dbConnector = new DBConnector();

	private Connection connection = dbConnector.getConnection();

	private UserInformationDTO userInformationDTO = new UserInformationDTO();

	public UserInformationDTO getUserInfo(String loginId){

		String sql ="SELECT * FROM login_user_transaction where login_id = ? ";

		System.out.println("MapからちゃんとloginIdが渡されてるかチェック"+loginId);


		try {
			PreparedStatement preparedStatement = connection.prepareStatement(sql);
			preparedStatement.setString(1, loginId);

			ResultSet resultSet = preparedStatement.executeQuery();

			if (resultSet.next()) {
				userInformationDTO.setLoginId(resultSet.getString("login_id"));
				userInformationDTO.setLoginpass(resultSet.getString("login_pass"));
				userInformationDTO.setUserName(resultSet.getString("user_name"));
				userInformationDTO.setYear(resultSet.getString("year"));
				userInformationDTO.setStreetAddress(resultSet.getString("street_address"));
				userInformationDTO.setSex(resultSet.getString("sex"));
				userInformationDTO.setPhoneNumber(resultSet.getString("phone_number"));
				userInformationDTO.setMailAddress("mail_address");


			}

		} catch (SQLException e) {
			e.printStackTrace();
		}



		return userInformationDTO;

	}

	public UserInformationDTO getUserInformationDTO() {
		return userInformationDTO;
	}

	public void setUserInformationDTO(UserInformationDTO userInformationDTO) {
		this.userInformationDTO = userInformationDTO;
	}


}
